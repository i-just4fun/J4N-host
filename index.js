const _0x17b9c9=_0x1ad3;function _0x5dc0(){const _0xe0e0a1=['basename','body','Server\x20started\x20successfully','Access\x20granted.\x20Starting\x20the\x20project...','query','now','passport','close','SIGTERM','question','filter','❌\x20استخدم\x20الأمر\x20بشكل\x20صحيح:\x20`!addbalance\x20@User\x2050`','server.js','utf8','ready','text/event-stream','userservercounts','callbackURL','set','single','messageCreate','20xKsNeB','Unauthorized','your_secret_key','reply','nextTick','/api/save-file/:serverName/:fileName','Server\x20is\x20running\x20on\x20port\x20','pathExists','/api/start-server/:serverName','multer','mimetype','34536KFJfZh','deserializeUser','/edit-server/:serverName','readline','Access\x20denied.\x20Incorrect\x20password.','Error\x20deleting\x20server:','authenticate','isDirectory','originalname','setHeader','42028mbOYLy','log','/api/stop-server/:serverName','ADMIN_ID','Strategy','file','exit','config','extract-zip','isAuthenticated','https://youtube.com/@nova-maker','غير\x20مصرح','stderr','Server\x20is\x20already\x20running','✅\x20تم\x20إضافة\x20**','.zip','views','login','output','11UOojRD','Error\x20creating\x20directories:','Error\x20creating\x20server:','discord.js','error','5210115wDSZnP','main.js','render','author','redirect','shift','uploads','✅\x20تم\x20تشغيل\x20البوت:\x20','رصيدك\x20غير\x20كافٍ\x20لإنشاء\x20سيرفر.\x20تحتاج\x20إلى\x2010\x20نقاط\x20على\x20الأقل.','Error\x20deleting\x20file:','mongodb','findOneAndUpdate','✅\x20Connected\x20to\x20MongoDB','dotenv','write','اسم\x20السيرفر\x20غير\x20صالح.\x20يمكن\x20استخدام\x20الحروف\x20العربية\x20والإنجليزية\x20والأرقام\x20والشرطات\x20فقط','```#credit\x20','userbalances','token','stdin','has','ejs','Connection','model','statSync','guilds','/create-server','5289776TJGtVR','Server\x20control\x20error:','status','data','catch','test','/server/:serverName','replace','UserBalance','delete','**\x20نقطة\x20إلى\x20حساب\x0a\x0a\x20<@','/dashboard','**\x20رصيد\x20إلى\x20حسابك!','12553klqwzH','includes','readdir','use','Main\x20file\x20not\x20found','express','user','PORT','/auth/discord','NODE_ENV','size','node','السيرفر\x20غير\x20موجود','process','listen','/dashboard?error=Server\x20not\x20found','CREDIT_RATE','index','Cache-Control','/api/delete-server/:serverName','endsWith','toString','حدث\x20خطأ\x20أثناء\x20إنشاء\x20السيرفر:\x20','remove','first','child_process','❌\x20إعدادات\x20الدفع\x20غير\x20مكتملة!\x20الرجاء\x20ضبط\x20`RECIPIENT_ID`\x20و\x20`PROBOT_ID`\x20في\x20`.env`.','الرجاء\x20اختيار\x20ملف\x20ZIP','560LqEGpR','Please\x20enter\x20the\x20password\x20to\x20start\x20the\x20project:\x20','server-control','startsWith','connect','unlink','push','json','discord','Logged\x20in\x20as\x20','Server\x20is\x20not\x20running','🔄\x20قم\x20بتحويل\x20`','.js','then','Schema','majority','يوجد\x20سيرفر\x20بهذا\x20الاسم\x20مسبقاً','MTI5NDYwNDgxOTYwMzkxODg4OQ.G2NdAt.NDJNiBRHmR_CIkmx-MY7IWQURhhH3YBecJioVY','join','env','keep-alive','content','no-cache','identify','urlencoded','params','ensureDir','RECIPIENT_ID','session','findOne','14877180ZpFTEv','stringify','length','send','4174380hLcqgB','mongoose','save','Content-Type','post','once','يُسمح\x20فقط\x20بملفات\x20ZIP','application/zip','💰\x20رصيدك\x20الحالي\x20هو:\x20**','create','home','users','path','/api/file-content/:serverName/:fileName','application/x-zip-compressed','kill','client_secret','stdout','serverName','>\x20لإتمام\x20عملية\x20الشراء.\x0a','321VOIHUk','```\x0a','/delete-file/:serverName/:fileName','/api/stream-output/:processKey','get','create-server','ensureDirSync','bot.js','94FusHta','mentions','/dashboard?error=','message','collect','balance','الملف\x20غير\x20موجود','initialize','data:\x20','UserServerCount','trim','File\x20not\x20found','count','tag'];_0x5dc0=function(){return _0xe0e0a1;};return _0x5dc0();}(function(_0x505cbf,_0x405c1f){const _0x59702e=_0x1ad3,_0x19ac1f=_0x505cbf();while(!![]){try{const _0x20baa8=parseInt(_0x59702e(0x93))/0x1*(-parseInt(_0x59702e(0xed))/0x2)+parseInt(_0x59702e(0xe5))/0x3*(parseInt(_0x59702e(0x125))/0x4)+parseInt(_0x59702e(0x13d))/0x5+parseInt(_0x59702e(0x11b))/0x6*(-parseInt(_0x59702e(0xaf))/0x7)+-parseInt(_0x59702e(0x158))/0x8+-parseInt(_0x59702e(0xd1))/0x9*(parseInt(_0x59702e(0x110))/0xa)+-parseInt(_0x59702e(0x138))/0xb*(-parseInt(_0x59702e(0xcd))/0xc);if(_0x20baa8===_0x405c1f)break;else _0x19ac1f['push'](_0x19ac1f['shift']());}catch(_0x216194){_0x19ac1f['push'](_0x19ac1f['shift']());}}}(_0x5dc0,0xbb2f0));function _0x1ad3(_0x5d38d6,_0x46dfc3){const _0x5dc036=_0x5dc0();return _0x1ad3=function(_0x1ad3e3,_0x3bbd57){_0x1ad3e3=_0x1ad3e3-0x93;let _0x31d287=_0x5dc036[_0x1ad3e3];return _0x31d287;},_0x1ad3(_0x5d38d6,_0x46dfc3);}const readline=require(_0x17b9c9(0x11e)),rl=readline['createInterface']({'input':process[_0x17b9c9(0x150)],'output':process[_0x17b9c9(0xe2)]}),PASSWORD=_0x17b9c9(0x12f);rl[_0x17b9c9(0x104)](_0x17b9c9(0xb0),_0x599e6c=>{const _0x93647a=_0x17b9c9;_0x599e6c===PASSWORD?(console['log'](_0x93647a(0xfe)),rl[_0x93647a(0x102)](),startProject()):(console['log'](_0x93647a(0x11f)),rl['close'](),process[_0x93647a(0x12b)](0x1));});function startProject(){const _0x3d7209=_0x17b9c9;require(_0x3d7209(0x14a))[_0x3d7209(0x12c)]();const _0x27520a=require(_0x3d7209(0x98)),_0x2f3bde=require('express-session'),_0xb06e1e=require(_0x3d7209(0x101)),_0x360faa=require('passport-discord')[_0x3d7209(0x129)],_0xa0d30=require('body-parser'),_0x3ce50a=require(_0x3d7209(0x119)),_0x43db19=require('fs-extra'),_0x2a99c8=require(_0x3d7209(0xdd)),_0x463fe5=require(_0x3d7209(0xd2)),_0x1c44c0=require('connect-mongo'),{spawn:_0x503902,execSync:_0x345b75,exec:_0x5aca73}=require(_0x3d7209(0xac)),_0x5d4337=require(_0x3d7209(0x13b)),_0x34f4f9=_0x27520a(),_0x31ef82=process['env'][_0x3d7209(0x9a)],{readdirSync:_0x4b0993}=require('fs'),_0x14f98d=_0x2a99c8[_0x3d7209(0xc1)](__dirname,'bots'),_0xc759f6=_0x4b0993(_0x14f98d)['filter'](_0x3e84a3=>_0x3e84a3[_0x3d7209(0xa7)](_0x3d7209(0xbb)));_0xc759f6['forEach'](_0x1bdbb0=>{const _0x40bccf=_0x3d7209,_0xc4774f=_0x2a99c8['join'](_0x14f98d,_0x1bdbb0);require(_0xc4774f),console[_0x40bccf(0x126)](_0x40bccf(0x144)+_0x1bdbb0);});async function _0x41309a(_0x3411fb){const _0x22409c=_0x3d7209,_0x400183=['index.js',_0x22409c(0xec),_0x22409c(0x13e),_0x22409c(0x107)];for(const _0x49ab4b of _0x400183){const _0x5424f4=_0x2a99c8['join'](_0x3411fb,_0x49ab4b);if(await _0x43db19[_0x22409c(0x117)](_0x5424f4))return _0x5424f4;}return null;}const _0x2b2022=new Map(),_0x4d626c=new Map(),_0x25726c=new Map(),_0x12d0d0=new _0x5d4337['Client']({'intents':0x31ffff});_0x12d0d0[_0x3d7209(0xd6)](_0x3d7209(0x109),()=>{const _0x5015f8=_0x3d7209;console[_0x5015f8(0x126)](_0x5015f8(0xb8)+_0x12d0d0['user'][_0x5015f8(0xfa)]);}),_0x463fe5[_0x3d7209(0xb3)](process[_0x3d7209(0xc2)][_0x3d7209(0x147)],{'useNewUrlParser':!![],'useUnifiedTopology':!![],'serverSelectionTimeoutMS':0x7530,'socketTimeoutMS':0xafc8,'retryWrites':!![],'w':_0x3d7209(0xbe)})[_0x3d7209(0xbc)](()=>{const _0x4e8610=_0x3d7209;console[_0x4e8610(0x126)](_0x4e8610(0x149));})[_0x3d7209(0x15c)](_0x166de0=>{const _0x2e21eb=_0x3d7209;console['error']('❌\x20MongoDB\x20connection\x20error:',_0x166de0),process[_0x2e21eb(0x12b)](0x1);});const _0x157f22=_0x463fe5[_0x3d7209(0x154)](_0x3d7209(0x160),new _0x463fe5['Schema']({'userId':String,'balance':{'type':Number,'default':0x0}}),_0x3d7209(0x14e));_0xb06e1e['serializeUser']((_0x14cb5e,_0x55183e)=>_0x55183e(null,_0x14cb5e)),_0xb06e1e[_0x3d7209(0x11c)]((_0x218d97,_0x2f6018)=>_0x2f6018(null,_0x218d97)),_0xb06e1e[_0x3d7209(0x96)](new _0x360faa({'clientID':process[_0x3d7209(0xc2)]['clientId'],'clientSecret':process[_0x3d7209(0xc2)][_0x3d7209(0xe1)],'callbackURL':process[_0x3d7209(0xc2)][_0x3d7209(0x10c)],'scope':[_0x3d7209(0xc6),_0x3d7209(0x156)]},(_0x556ab6,_0x1eac7a,_0x15671d,_0x5ad038)=>{const _0xd58a0e=_0x3d7209;process[_0xd58a0e(0x114)](()=>_0x5ad038(null,_0x15671d));}));const _0x2c58eb='!';_0x12d0d0['on'](_0x3d7209(0x10f),async _0x2695c5=>{const _0x656d29=_0x3d7209;if(_0x2695c5['author']['bot'])return;if(!_0x2695c5['content'][_0x656d29(0xb2)](_0x2c58eb))return;const _0x360045=_0x2695c5[_0x656d29(0xc4)]['slice'](_0x2c58eb[_0x656d29(0xcf)])[_0x656d29(0xf7)]()['split'](/ +/),_0x249d08=_0x360045[_0x656d29(0x142)]()['toLowerCase']();if(_0x249d08==='balance'){const _0x556f8f=await _0x157f22['findOne']({'userId':_0x2695c5['author']['id']})||{'balance':0x0};return _0x2695c5['reply'](_0x656d29(0xd9)+_0x556f8f[_0x656d29(0xf2)]+'**\x20نقطة.');}if(_0x249d08==='addbalance'){if(_0x2695c5[_0x656d29(0x140)]['id']!==process['env'][_0x656d29(0x128)])return _0x2695c5[_0x656d29(0x113)]('❌\x20ليس\x20لديك\x20صلاحية\x20لاستخدام\x20هذا\x20الأمر!');const _0x5eb1c0=_0x2695c5[_0x656d29(0xee)][_0x656d29(0xdc)][_0x656d29(0xab)](),_0x2e9420=parseInt(_0x360045[0x1]);if(!_0x5eb1c0||isNaN(_0x2e9420)||_0x2e9420<=0x0)return _0x2695c5[_0x656d29(0x113)](_0x656d29(0x106));return await _0x157f22[_0x656d29(0x148)]({'userId':_0x5eb1c0['id']},{'$inc':{'balance':_0x2e9420}},{'upsert':!![]}),_0x2695c5['reply'](_0x656d29(0x133)+_0x2e9420+_0x656d29(0x162)+_0x5eb1c0['id']+'>!');}if(_0x249d08==='buy'){const _0x3fcd1c=parseInt(_0x360045[0x0]);if(isNaN(_0x3fcd1c)||_0x3fcd1c<=0x0)return _0x2695c5[_0x656d29(0x113)]('❌\x20يجب\x20تحديد\x20مبلغ\x20صحيح\x20لشراء\x20الرصيد!\x20مثال:\x20`!buy\x201`');const _0x55775c=parseInt(process['env'][_0x656d29(0xa3)])||0x2710,_0x236212=_0x3fcd1c*_0x55775c,_0x107ee0=process['env'][_0x656d29(0xca)],_0x4d4de6=process[_0x656d29(0xc2)]['PROBOT_ID'];if(!_0x107ee0||!_0x4d4de6)return _0x2695c5[_0x656d29(0x113)](_0x656d29(0xad));const _0x42bc4b=await _0x2695c5[_0x656d29(0x113)](_0x656d29(0xba)+_0x236212+'`\x20كريدت\x20إلى\x20<@'+_0x107ee0+_0x656d29(0xe4)+(_0x656d29(0x14d)+_0x107ee0+'\x20'+_0x236212+_0x656d29(0xe6))+'لديك\x203\x20دقائق\x20لإتمام\x20العملية.'),_0x9ff2d=_0x4a4bb8=>_0x4a4bb8[_0x656d29(0xc4)]['includes'](_0x236212)&&(_0x4a4bb8[_0x656d29(0xc4)][_0x656d29(0x94)](_0x107ee0)||_0x4a4bb8[_0x656d29(0xc4)]['includes']('<@'+_0x107ee0+'>'))&&_0x4a4bb8['author']['id']===_0x4d4de6,_0x4f6877=_0x2695c5['channel']['createMessageCollector']({'filter':_0x9ff2d,'max':0x1,'time':0x3e8*0x3c*0x3});_0x4f6877['on'](_0x656d29(0xf1),async()=>{const _0x120c79=_0x656d29;return await _0x157f22[_0x120c79(0x148)]({'userId':_0x2695c5[_0x120c79(0x140)]['id']},{'$inc':{'balance':_0x3fcd1c}},{'upsert':!![]}),_0x2695c5[_0x120c79(0x113)](_0x120c79(0x133)+_0x3fcd1c+_0x120c79(0x164));}),_0x4f6877['on']('end',_0x17aa96=>{const _0x3fc371=_0x656d29;if(_0x17aa96[_0x3fc371(0x9d)]===0x0)return _0x42bc4b[_0x3fc371(0x161)]()[_0x3fc371(0x15c)](()=>{}),_0x2695c5[_0x3fc371(0x113)]('❌\x20انتهى\x20الوقت\x20ولم\x20يتم\x20استلام\x20التحويل.');});}});const _0x4e031d=_0x3ce50a['diskStorage']({'destination':function(_0x5ef47a,_0x525f27,_0x43a1f6){const _0x176367=_0x3d7209;if(!_0x5ef47a[_0x176367(0x99)])return _0x43a1f6(new Error('User\x20not\x20authenticated'));const _0x2edb0e=_0x5ef47a[_0x176367(0x99)]['id'],_0x4de970=_0x2a99c8['join'](__dirname,_0x176367(0x143),_0x2edb0e);_0x43db19[_0x176367(0xeb)](_0x4de970),_0x43a1f6(null,_0x4de970);},'filename':function(_0x12a291,_0x391473,_0x50c0d1){const _0x3421f6=_0x3d7209,_0x8b3c57=_0x391473[_0x3421f6(0x123)][_0x3421f6(0x15f)](/[^a-zA-Z0-9.-]/g,'_');_0x50c0d1(null,Date['now']()+'-'+_0x8b3c57);}}),_0x1dae33=_0x3ce50a({'storage':_0x4e031d,'fileFilter':(_0x294eb3,_0x27be43,_0x371ea8)=>{const _0x388fc0=_0x3d7209;_0x27be43[_0x388fc0(0x11a)]===_0x388fc0(0xd8)||_0x27be43[_0x388fc0(0x11a)]===_0x388fc0(0xdf)||_0x27be43[_0x388fc0(0x123)]['toLowerCase']()[_0x388fc0(0xa7)](_0x388fc0(0x134))?_0x371ea8(null,!![]):_0x371ea8(new Error(_0x388fc0(0xd7)));},'limits':{'fileSize':0x64*0x400*0x400}});_0x34f4f9['use'](_0xa0d30[_0x3d7209(0xb6)]()),_0x34f4f9['use'](_0xa0d30[_0x3d7209(0xc7)]({'extended':!![]})),_0x34f4f9[_0x3d7209(0x10d)]('view\x20engine',_0x3d7209(0x152)),_0x34f4f9[_0x3d7209(0x96)](_0x2f3bde({'secret':process[_0x3d7209(0xc2)]['SESSION_SECRET']||_0x3d7209(0x112),'resave':![],'saveUninitialized':![],'store':_0x1c44c0[_0x3d7209(0xda)]({'mongoUrl':process[_0x3d7209(0xc2)]['mongodb'],'ttl':0x18*0x3c*0x3c}),'cookie':{'secure':process[_0x3d7209(0xc2)][_0x3d7209(0x9c)]==='production','maxAge':0x18*0x3c*0x3c*0x3e8}})),_0x34f4f9[_0x3d7209(0x96)](_0xb06e1e[_0x3d7209(0xf4)]()),_0x34f4f9[_0x3d7209(0x96)](_0xb06e1e[_0x3d7209(0xcb)]()),_0x34f4f9['get']('/',(_0x492024,_0x374b47)=>{const _0x1a984b=_0x3d7209;_0x374b47[_0x1a984b(0x13f)](_0x1a984b(0xdb),{'error':_0x492024[_0x1a984b(0xff)][_0x1a984b(0x13c)],'message':_0x492024[_0x1a984b(0xff)][_0x1a984b(0xf0)],'isAuthenticated':_0x492024[_0x1a984b(0x12e)](),'user':_0x492024[_0x1a984b(0x99)]});}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0x9b),_0xb06e1e[_0x3d7209(0x121)](_0x3d7209(0xb7))),_0x34f4f9[_0x3d7209(0xe9)]('/auth/discord/callback',_0xb06e1e[_0x3d7209(0x121)](_0x3d7209(0xb7),{'failureRedirect':'/'}),(_0x3df153,_0x21df93)=>_0x21df93[_0x3d7209(0x141)]('/dashboard'));const _0x3d2735=_0x463fe5[_0x3d7209(0x154)](_0x3d7209(0xf6),new _0x463fe5[(_0x3d7209(0xbd))]({'userId':String,'count':{'type':Number,'default':0x0}}),_0x3d7209(0x10b));_0x34f4f9['get'](_0x3d7209(0x163),async(_0x543851,_0x1641de)=>{const _0xfe59c=_0x3d7209;if(!_0x543851[_0xfe59c(0x12e)]())return _0x1641de[_0xfe59c(0x141)]('/');const _0x1d9121=_0x543851['user']['id'],_0x346a1a=await _0x157f22[_0xfe59c(0xcc)]({'userId':_0x1d9121})||new _0x157f22({'userId':_0x1d9121}),_0x9f42ff=_0x2a99c8[_0xfe59c(0xc1)](__dirname,_0xfe59c(0x143),_0x1d9121);let _0x3ef7e8=[];if(await _0x43db19[_0xfe59c(0x117)](_0x9f42ff)){const _0x2a28ca=await _0x43db19[_0xfe59c(0x95)](_0x9f42ff);_0x3ef7e8=_0x2a28ca[_0xfe59c(0x105)](_0x2473df=>_0x43db19[_0xfe59c(0x155)](_0x2a99c8[_0xfe59c(0xc1)](_0x9f42ff,_0x2473df))[_0xfe59c(0x122)]());}const _0x177160=await _0x3d2735[_0xfe59c(0xcc)]({'userId':_0x1d9121});_0x1641de[_0xfe59c(0x13f)](_0xfe59c(0xa4),{'user':_0x543851[_0xfe59c(0x99)],'servers':_0x3ef7e8,'balance':_0x346a1a[_0xfe59c(0xf2)],'userServerCount':_0x177160?_0x177160[_0xfe59c(0xf9)]:0x0});}),_0x12d0d0[_0x3d7209(0x136)](_0x3d7209(0xc0)),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0x15e),async(_0x589060,_0x303322)=>{const _0x4c82f3=_0x3d7209;if(!_0x589060[_0x4c82f3(0x12e)]())return _0x303322[_0x4c82f3(0x141)]('/');try{const {serverName:_0x50533b}=_0x589060[_0x4c82f3(0xc8)],_0x528fb3=_0x589060[_0x4c82f3(0x99)]['id'],_0x45af80=decodeURIComponent(_0x50533b),_0x3c41f2=_0x2a99c8['join'](__dirname,'uploads',_0x528fb3,_0x45af80);if(!await _0x43db19['pathExists'](_0x3c41f2))return _0x303322[_0x4c82f3(0x141)](_0x4c82f3(0xa2));const _0x2bf875=_0x528fb3+'-'+_0x45af80,_0x81b67b=_0x2b2022['has'](_0x2bf875);_0x303322[_0x4c82f3(0x13f)](_0x4c82f3(0xb1),{'user':_0x589060[_0x4c82f3(0x99)],'serverName':_0x45af80,'isRunning':_0x81b67b});}catch(_0x1ebe5e){console['error'](_0x4c82f3(0x159),_0x1ebe5e),_0x303322[_0x4c82f3(0x141)](_0x4c82f3(0xef)+encodeURIComponent('Error\x20accessing\x20server'));}}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0x157),(_0x11d55a,_0x136421)=>{const _0x3ec221=_0x3d7209;if(!_0x11d55a[_0x3ec221(0x12e)]())return _0x136421['redirect']('/');_0x136421[_0x3ec221(0x13f)](_0x3ec221(0xea),{'user':_0x11d55a[_0x3ec221(0x99)],'error':null});}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0x11d),async(_0x1bae9b,_0x5938f3)=>{const _0x55a044=_0x3d7209;if(!_0x1bae9b[_0x55a044(0x12e)]())return _0x5938f3[_0x55a044(0x141)]('/');try{const {serverName:_0x6e399c}=_0x1bae9b[_0x55a044(0xc8)],_0x52f5ae=_0x1bae9b[_0x55a044(0x99)]['id'],_0x3f4deb=_0x2a99c8[_0x55a044(0xc1)](__dirname,_0x55a044(0x143),_0x52f5ae,_0x6e399c);if(!await _0x43db19['pathExists'](_0x3f4deb))return _0x5938f3[_0x55a044(0x141)](_0x55a044(0xa2));const _0x42ec1e=await _0x43db19['readdir'](_0x3f4deb),_0x2bb744=await _0x41309a(_0x3f4deb),_0x3b759f=_0x52f5ae+'-'+_0x6e399c,_0x217455=_0x2b2022[_0x55a044(0x151)](_0x3b759f);_0x5938f3[_0x55a044(0x13f)]('edit-server',{'user':_0x1bae9b[_0x55a044(0x99)],'serverName':_0x6e399c,'files':_0x42ec1e,'mainFile':_0x2bb744?_0x2a99c8[_0x55a044(0xfb)](_0x2bb744):null,'isRunning':_0x217455});}catch(_0x56ef0d){_0x5938f3[_0x55a044(0x141)](_0x55a044(0xef)+encodeURIComponent(_0x56ef0d[_0x55a044(0xf0)]));}}),_0x34f4f9[_0x3d7209(0x96)](async(_0x376f8c,_0x1f3d73,_0x7d4cc2)=>{const _0x58d328=_0x3d7209;try{await _0x43db19[_0x58d328(0xc9)](_0x2a99c8[_0x58d328(0xc1)](__dirname,_0x58d328(0x135))),await _0x43db19[_0x58d328(0xc9)](_0x2a99c8[_0x58d328(0xc1)](__dirname,_0x58d328(0x143))),_0x7d4cc2();}catch(_0x2e0e05){console[_0x58d328(0x13c)](_0x58d328(0x139),_0x2e0e05),_0x7d4cc2(_0x2e0e05);}}),_0x34f4f9[_0x3d7209(0xa1)](_0x31ef82,()=>{const _0x92c54f=_0x3d7209;console[_0x92c54f(0x126)](_0x92c54f(0x116)+_0x31ef82);}),_0x34f4f9[_0x3d7209(0xd5)](_0x3d7209(0x127),async(_0x281b23,_0x48f9fc)=>{const _0x40d639=_0x3d7209;if(!_0x281b23[_0x40d639(0x12e)]())return _0x48f9fc[_0x40d639(0x15a)](0x191)[_0x40d639(0xb6)]({'success':![],'error':_0x40d639(0x111)});try{const {serverName:_0xaf68fc}=_0x281b23[_0x40d639(0xc8)],_0x3fa9f7=_0x281b23['user']['id'],_0x40d6d8=_0x3fa9f7+'-'+_0xaf68fc,_0x412253=_0x2b2022[_0x40d639(0xe9)](_0x40d6d8);_0x412253?(_0x412253[_0x40d639(0xa0)][_0x40d639(0xe0)](_0x40d639(0x103)),_0x2b2022[_0x40d639(0x161)](_0x40d6d8),_0x48f9fc[_0x40d639(0xb6)]({'success':!![]})):_0x48f9fc[_0x40d639(0xb6)]({'success':![],'error':_0x40d639(0xb9)});}catch(_0x48d881){_0x48f9fc[_0x40d639(0xb6)]({'success':![],'error':_0x48d881[_0x40d639(0xf0)]});}}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0xde),async(_0x1b440c,_0x21ee15)=>{const _0x2795cb=_0x3d7209;if(!_0x1b440c['isAuthenticated']())return _0x21ee15['status'](0x191)[_0x2795cb(0xb6)]({'success':![],'error':'Unauthorized'});try{const {serverName:_0x993a12,fileName:_0x504168}=_0x1b440c[_0x2795cb(0xc8)],_0x40c5d7=_0x1b440c[_0x2795cb(0x99)]['id'],_0x5dd96e=_0x2a99c8[_0x2795cb(0xc1)](__dirname,_0x2795cb(0x143),_0x40c5d7,_0x993a12,_0x504168);if(!await _0x43db19[_0x2795cb(0x117)](_0x5dd96e))return _0x21ee15['status'](0x194)[_0x2795cb(0xd0)](_0x2795cb(0xf8));const _0x25d8e7=await _0x43db19['readFile'](_0x5dd96e,_0x2795cb(0x108));_0x21ee15['send'](_0x25d8e7);}catch(_0xd371a5){_0x21ee15[_0x2795cb(0x15a)](0x1f4)[_0x2795cb(0xd0)](_0xd371a5['message']);}}),_0x34f4f9[_0x3d7209(0xd5)](_0x3d7209(0x115),async(_0x474db0,_0x5f00d5)=>{const _0x212f48=_0x3d7209;if(!_0x474db0[_0x212f48(0x12e)]())return _0x5f00d5[_0x212f48(0x15a)](0x191)[_0x212f48(0xb6)]({'success':![],'error':'Unauthorized'});try{const {serverName:_0x870d8b,fileName:_0x21e572}=_0x474db0[_0x212f48(0xc8)],{content:_0x2a9131}=_0x474db0['body'],_0x1d7564=_0x474db0[_0x212f48(0x99)]['id'],_0x34d844=_0x2a99c8[_0x212f48(0xc1)](__dirname,'uploads',_0x1d7564,_0x870d8b,_0x21e572);await _0x43db19['writeFile'](_0x34d844,_0x2a9131,'utf8'),_0x5f00d5[_0x212f48(0xb6)]({'success':!![]});}catch(_0x4ed93d){_0x5f00d5[_0x212f48(0xb6)]({'success':![],'error':_0x4ed93d[_0x212f48(0xf0)]});}}),_0x34f4f9[_0x3d7209(0xd5)](_0x3d7209(0x118),async(_0x579734,_0x393bc6)=>{const _0x2f7d29=_0x3d7209;if(!_0x579734[_0x2f7d29(0x12e)]())return _0x393bc6['status'](0x191)['json']({'success':![],'error':_0x2f7d29(0x111)});try{const {serverName:_0x33b027}=_0x579734[_0x2f7d29(0xc8)],_0x3c2a50=_0x579734[_0x2f7d29(0x99)]['id'],_0x386d35=_0x2a99c8['join'](__dirname,_0x2f7d29(0x143),_0x3c2a50,_0x33b027),_0x5ab7e7=await _0x41309a(_0x386d35);if(!_0x5ab7e7)return _0x393bc6[_0x2f7d29(0xb6)]({'success':![],'error':_0x2f7d29(0x97)});const _0x619494=_0x3c2a50+'-'+_0x33b027;if(_0x2b2022[_0x2f7d29(0x151)](_0x619494))return _0x393bc6[_0x2f7d29(0xb6)]({'success':![],'error':_0x2f7d29(0x132)});const _0x46c23f=_0x503902(_0x2f7d29(0x9e),[_0x5ab7e7],{'cwd':_0x386d35});_0x2b2022[_0x2f7d29(0x10d)](_0x619494,{'process':_0x46c23f,'output':[],'startTime':Date[_0x2f7d29(0x100)]()}),_0x46c23f[_0x2f7d29(0xe2)]['on'](_0x2f7d29(0x15b),_0x159cd7=>{const _0x514662=_0x2f7d29,_0x30b99c=_0x159cd7[_0x514662(0xa8)](),_0x4cba63=_0x2b2022['get'](_0x619494);_0x4cba63&&_0x4cba63[_0x514662(0x137)][_0x514662(0xb5)](_0x30b99c);}),_0x46c23f['stderr']['on'](_0x2f7d29(0x15b),_0x2c8b71=>{const _0x58f677=_0x2f7d29,_0x554f38=_0x2c8b71[_0x58f677(0xa8)](),_0x3c76f7=_0x2b2022['get'](_0x619494);_0x3c76f7&&_0x3c76f7[_0x58f677(0x137)][_0x58f677(0xb5)](_0x554f38);}),_0x46c23f['on'](_0x2f7d29(0x102),_0x468557=>{const _0x435e9a=_0x2f7d29;_0x2b2022[_0x435e9a(0x161)](_0x619494);}),_0x393bc6[_0x2f7d29(0xb6)]({'success':!![],'processKey':_0x619494,'output':_0x2f7d29(0xfd)});}catch(_0x8d4126){console[_0x2f7d29(0x13c)]('Error\x20starting\x20server:',_0x8d4126),_0x393bc6['json']({'success':![],'error':_0x8d4126[_0x2f7d29(0xf0)]});}}),_0x34f4f9['get']('/api/stream-output/:processKey',(_0x1d79bc,_0x1ca762)=>{const _0x231299=_0x3d7209,{processKey:_0x871662}=_0x1d79bc[_0x231299(0xc8)];_0x1ca762[_0x231299(0x124)](_0x231299(0xd4),_0x231299(0x10a)),_0x1ca762[_0x231299(0x124)](_0x231299(0xa5),_0x231299(0xc5)),_0x1ca762[_0x231299(0x124)]('Connection',_0x231299(0xc3));const _0x2cb111=_0x2b2022[_0x231299(0xe9)](_0x871662);if(_0x2cb111){const {output:_0x47bbda}=_0x2cb111;_0x47bbda[_0x231299(0xcf)]>0x0&&(_0x1ca762['write'](_0x231299(0xf5)+JSON[_0x231299(0xce)](_0x47bbda['join']('\x0a'))+'\x0a\x0a'),_0x47bbda[_0x231299(0xcf)]=0x0);}const _0x5bdbc8=setInterval(()=>{const _0x2f1803=_0x231299,_0x5b7e3e=_0x2b2022[_0x2f1803(0xe9)](_0x871662);if(_0x5b7e3e){const {output:_0x11b405}=_0x5b7e3e;_0x11b405[_0x2f1803(0xcf)]>0x0&&(_0x1ca762[_0x2f1803(0x14b)](_0x2f1803(0xf5)+JSON[_0x2f1803(0xce)](_0x11b405['join']('\x0a'))+'\x0a\x0a'),_0x11b405[_0x2f1803(0xcf)]=0x0);}},0x3e8);_0x1d79bc['on'](_0x231299(0x102),()=>{clearInterval(_0x5bdbc8);});}),_0x34f4f9['post'](_0x3d7209(0xa6),async(_0x3fd663,_0x2e694c)=>{const _0x165c21=_0x3d7209;if(!_0x3fd663[_0x165c21(0x12e)]())return _0x2e694c[_0x165c21(0x15a)](0x191)[_0x165c21(0xb6)]({'success':![],'error':_0x165c21(0x130)});try{const _0x47f16f=decodeURIComponent(_0x3fd663[_0x165c21(0xc8)][_0x165c21(0xe3)]),_0x1a321f=_0x3fd663[_0x165c21(0x99)]['id'],_0x26a2ec=_0x2a99c8[_0x165c21(0xc1)](__dirname,_0x165c21(0x143),_0x1a321f,_0x47f16f),_0x56f50c=await _0x43db19[_0x165c21(0x117)](_0x26a2ec);if(!_0x56f50c)return _0x2e694c[_0x165c21(0xb6)]({'success':![],'error':_0x165c21(0x9f)});const _0x1dde4e=_0x1a321f+'-'+_0x47f16f;if(_0x2b2022[_0x165c21(0x151)](_0x1dde4e)){const _0x5d2240=_0x2b2022['get'](_0x1dde4e);_0x5d2240['process'][_0x165c21(0xe0)](_0x165c21(0x103)),_0x2b2022[_0x165c21(0x161)](_0x1dde4e);}await _0x43db19['remove'](_0x26a2ec),_0x2e694c[_0x165c21(0xb6)]({'success':!![]});}catch(_0x5a04f6){console[_0x165c21(0x13c)](_0x165c21(0x120),_0x5a04f6),_0x2e694c[_0x165c21(0xb6)]({'success':![],'error':'حدث\x20خطأ\x20أثناء\x20حذف\x20السيرفر'});}}),_0x34f4f9['post'](_0x3d7209(0x118),async(_0x4a992f,_0x462ff7)=>{const _0x1dcb0a=_0x3d7209;if(!_0x4a992f[_0x1dcb0a(0x12e)]())return _0x462ff7[_0x1dcb0a(0x15a)](0x191)['json']({'success':![],'error':_0x1dcb0a(0x111)});try{const {serverName:_0x23f6a8}=_0x4a992f['params'],_0x53c909=_0x4a992f[_0x1dcb0a(0x99)]['id'],_0x4d9702=_0x2a99c8['join'](__dirname,'uploads',_0x53c909,_0x23f6a8),_0x1233dd=await _0x41309a(_0x4d9702);if(!_0x1233dd)return _0x462ff7[_0x1dcb0a(0xb6)]({'success':![],'error':_0x1dcb0a(0x97)});const _0x239e61=_0x53c909+'-'+_0x23f6a8;if(_0x2b2022[_0x1dcb0a(0x151)](_0x239e61))return _0x462ff7[_0x1dcb0a(0xb6)]({'success':![],'error':_0x1dcb0a(0x132)});const _0x3ff3e0=_0x503902(_0x1dcb0a(0x9e),[_0x1233dd],{'cwd':_0x4d9702});_0x2b2022[_0x1dcb0a(0x10d)](_0x239e61,{'process':_0x3ff3e0,'output':[],'startTime':Date['now']()}),_0x3ff3e0[_0x1dcb0a(0xe2)]['on'](_0x1dcb0a(0x15b),_0x42f465=>{const _0x3919be=_0x1dcb0a,_0x3e71cc=_0x42f465[_0x3919be(0xa8)](),_0x53c612=_0x2b2022[_0x3919be(0xe9)](_0x239e61);_0x53c612&&_0x53c612['output'][_0x3919be(0xb5)](_0x3e71cc);}),_0x3ff3e0[_0x1dcb0a(0x131)]['on'](_0x1dcb0a(0x15b),_0x34cfcd=>{const _0x1292c2=_0x1dcb0a,_0x38563b=_0x34cfcd['toString'](),_0x912c07=_0x2b2022[_0x1292c2(0xe9)](_0x239e61);_0x912c07&&_0x912c07[_0x1292c2(0x137)]['push'](_0x38563b);}),_0x3ff3e0['on']('close',_0x1b904e=>{_0x2b2022['delete'](_0x239e61);}),_0x462ff7['json']({'success':!![],'processKey':_0x239e61,'output':_0x1dcb0a(0xfd)});}catch(_0x42c463){console['error']('Error\x20starting\x20server:',_0x42c463),_0x462ff7[_0x1dcb0a(0xb6)]({'success':![],'error':_0x42c463['message']});}}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0xe8),(_0x2f70d3,_0x4e2877)=>{const _0x4348ae=_0x3d7209,{processKey:_0x5320ac}=_0x2f70d3['params'];_0x4e2877[_0x4348ae(0x124)](_0x4348ae(0xd4),_0x4348ae(0x10a)),_0x4e2877[_0x4348ae(0x124)](_0x4348ae(0xa5),'no-cache'),_0x4e2877[_0x4348ae(0x124)](_0x4348ae(0x153),_0x4348ae(0xc3));const _0x5a5ffe=_0x2b2022[_0x4348ae(0xe9)](_0x5320ac);if(_0x5a5ffe){const {output:_0x48cac4}=_0x5a5ffe;_0x48cac4[_0x4348ae(0xcf)]>0x0&&(_0x4e2877['write'](_0x4348ae(0xf5)+JSON[_0x4348ae(0xce)](_0x48cac4[_0x4348ae(0xc1)]('\x0a'))+'\x0a\x0a'),_0x48cac4[_0x4348ae(0xcf)]=0x0);}const _0x5dd922=setInterval(()=>{const _0x44da2f=_0x4348ae,_0x4cf600=_0x2b2022[_0x44da2f(0xe9)](_0x5320ac);if(_0x4cf600){const {output:_0x3fdead}=_0x4cf600;_0x3fdead[_0x44da2f(0xcf)]>0x0&&(_0x4e2877[_0x44da2f(0x14b)](_0x44da2f(0xf5)+JSON[_0x44da2f(0xce)](_0x3fdead[_0x44da2f(0xc1)]('\x0a'))+'\x0a\x0a'),_0x3fdead[_0x44da2f(0xcf)]=0x0);}},0x3e8);_0x2f70d3['on'](_0x4348ae(0x102),()=>{clearInterval(_0x5dd922);});}),_0x34f4f9[_0x3d7209(0x161)](_0x3d7209(0xe7),async(_0x102721,_0x2d10b4)=>{const _0x94bfe0=_0x3d7209;if(!_0x102721[_0x94bfe0(0x12e)]())return _0x2d10b4['status'](0x191)[_0x94bfe0(0xb6)]({'success':![],'error':_0x94bfe0(0x130)});try{const {serverName:_0x209b98,fileName:_0x1f2564}=_0x102721[_0x94bfe0(0xc8)],_0x22da43=_0x102721[_0x94bfe0(0x99)]['id'],_0x39b9f3=_0x2a99c8[_0x94bfe0(0xc1)](__dirname,'uploads',_0x22da43,_0x209b98,_0x1f2564);if(!await _0x43db19['pathExists'](_0x39b9f3))return _0x2d10b4['json']({'success':![],'error':_0x94bfe0(0xf3)});await _0x43db19[_0x94bfe0(0xaa)](_0x39b9f3),_0x2d10b4[_0x94bfe0(0xb6)]({'success':!![]});}catch(_0x4c54b4){console[_0x94bfe0(0x13c)](_0x94bfe0(0x146),_0x4c54b4),_0x2d10b4[_0x94bfe0(0xb6)]({'success':![],'error':_0x4c54b4[_0x94bfe0(0xf0)]});}}),_0x34f4f9[_0x3d7209(0xd5)]('/create-server',_0x1dae33[_0x3d7209(0x10e)]('serverFile'),async(_0x228e5f,_0x4f2478)=>{const _0xa91ec8=_0x3d7209;if(!_0x228e5f[_0xa91ec8(0x12e)]())return _0x4f2478[_0xa91ec8(0x141)]('/');try{const {serverName:_0x26d714}=_0x228e5f[_0xa91ec8(0xfc)],_0x13ad2b=_0x228e5f[_0xa91ec8(0x99)]['id'];if(!_0x26d714||!/^[\u0600-\u06FFa-zA-Z0-9-_]+$/[_0xa91ec8(0x15d)](_0x26d714)){if(_0x228e5f[_0xa91ec8(0x12a)])await _0x43db19[_0xa91ec8(0xb4)](_0x228e5f['file'][_0xa91ec8(0xdd)])[_0xa91ec8(0x15c)](console[_0xa91ec8(0x13c)]);return _0x4f2478[_0xa91ec8(0x13f)](_0xa91ec8(0xea),{'user':_0x228e5f[_0xa91ec8(0x99)],'error':_0xa91ec8(0x14c)});}if(!_0x228e5f[_0xa91ec8(0x12a)])return _0x4f2478[_0xa91ec8(0x13f)]('create-server',{'user':_0x228e5f['user'],'error':_0xa91ec8(0xae)});let _0x26c599=await _0x157f22['findOne']({'userId':_0x13ad2b});!_0x26c599&&(_0x26c599=new _0x157f22({'userId':_0x13ad2b,'balance':0x0}),await _0x26c599[_0xa91ec8(0xd3)]());if(_0x26c599['balance']<0xa)return await _0x43db19[_0xa91ec8(0xb4)](_0x228e5f[_0xa91ec8(0x12a)]['path'])['catch'](console[_0xa91ec8(0x13c)]),_0x4f2478['render'](_0xa91ec8(0xea),{'user':_0x228e5f[_0xa91ec8(0x99)],'error':_0xa91ec8(0x145)});const _0x31eef1=_0x2a99c8[_0xa91ec8(0xc1)](__dirname,_0xa91ec8(0x143),_0x13ad2b,_0x26d714);if(await _0x43db19[_0xa91ec8(0x117)](_0x31eef1))return await _0x43db19[_0xa91ec8(0xb4)](_0x228e5f['file'][_0xa91ec8(0xdd)]),_0x4f2478[_0xa91ec8(0x13f)](_0xa91ec8(0xea),{'user':_0x228e5f[_0xa91ec8(0x99)],'error':_0xa91ec8(0xbf)});await _0x43db19[_0xa91ec8(0xc9)](_0x31eef1);const _0x3a7dfe=require(_0xa91ec8(0x12d));await _0x3a7dfe(_0x228e5f[_0xa91ec8(0x12a)]['path'],{'dir':_0x31eef1}),await _0x43db19[_0xa91ec8(0xb4)](_0x228e5f[_0xa91ec8(0x12a)][_0xa91ec8(0xdd)]),_0x26c599[_0xa91ec8(0xf2)]-=0xa,_0x26c599[_0xa91ec8(0xf2)]<0x0&&(_0x26c599['balance']=0x0),await _0x26c599[_0xa91ec8(0xd3)](),await _0x3d2735[_0xa91ec8(0x148)]({'userId':_0x13ad2b},{'$inc':{'count':0x1}},{'upsert':!![]}),_0x4f2478[_0xa91ec8(0x141)]('/dashboard');}catch(_0x55f22b){console[_0xa91ec8(0x13c)](_0xa91ec8(0x13a),_0x55f22b),_0x228e5f[_0xa91ec8(0x12a)]&&await _0x43db19[_0xa91ec8(0xb4)](_0x228e5f['file'][_0xa91ec8(0xdd)])[_0xa91ec8(0x15c)](console[_0xa91ec8(0x13c)]),_0x4f2478[_0xa91ec8(0x13f)](_0xa91ec8(0xea),{'user':_0x228e5f[_0xa91ec8(0x99)],'error':_0xa91ec8(0xa9)+_0x55f22b['message']});}}),_0x34f4f9[_0x3d7209(0xe9)](_0x3d7209(0xe8),(_0x3bfe27,_0x45ada6)=>{const _0xcb9f12=_0x3d7209,{processKey:_0x3bc954}=_0x3bfe27[_0xcb9f12(0xc8)];_0x45ada6['setHeader'](_0xcb9f12(0xd4),'text/event-stream'),_0x45ada6[_0xcb9f12(0x124)](_0xcb9f12(0xa5),'no-cache'),_0x45ada6[_0xcb9f12(0x124)](_0xcb9f12(0x153),_0xcb9f12(0xc3));const _0x35573e=_0x2b2022[_0xcb9f12(0xe9)](_0x3bc954);if(_0x35573e){const {output:_0x787b50}=_0x35573e;_0x787b50[_0xcb9f12(0xcf)]>0x0&&(_0x45ada6['write'](_0xcb9f12(0xf5)+JSON[_0xcb9f12(0xce)](_0x787b50[_0xcb9f12(0xc1)]('\x0a'))+'\x0a\x0a'),_0x787b50[_0xcb9f12(0xcf)]=0x0);}const _0x3e017c=setInterval(()=>{const _0x6cc16c=_0xcb9f12,_0x1ccf14=_0x2b2022[_0x6cc16c(0xe9)](_0x3bc954);if(_0x1ccf14){const {output:_0x14bfe2}=_0x1ccf14;_0x14bfe2[_0x6cc16c(0xcf)]>0x0&&(_0x45ada6[_0x6cc16c(0x14b)](_0x6cc16c(0xf5)+JSON[_0x6cc16c(0xce)](_0x14bfe2[_0x6cc16c(0xc1)]('\x0a'))+'\x0a\x0a'),_0x14bfe2['length']=0x0);}},0x3e8);_0x3bfe27['on'](_0xcb9f12(0x102),()=>{clearInterval(_0x3e017c);});}),_0x34f4f9[_0x3d7209(0x161)]('/delete-file/:serverName/:fileName',async(_0x325fdf,_0x1fe057)=>{const _0x528f81=_0x3d7209;if(!_0x325fdf[_0x528f81(0x12e)]())return _0x1fe057[_0x528f81(0x15a)](0x191)[_0x528f81(0xb6)]({'success':![],'error':_0x528f81(0x130)});try{const {serverName:_0x872120,fileName:_0x546d05}=_0x325fdf['params'],_0xb4f69=_0x325fdf['user']['id'],_0x5c1a31=_0x2a99c8[_0x528f81(0xc1)](__dirname,'uploads',_0xb4f69,_0x872120,_0x546d05);if(!await _0x43db19[_0x528f81(0x117)](_0x5c1a31))return _0x1fe057[_0x528f81(0xb6)]({'success':![],'error':_0x528f81(0xf3)});await _0x43db19[_0x528f81(0xaa)](_0x5c1a31),_0x1fe057[_0x528f81(0xb6)]({'success':!![]});}catch(_0x34d52f){console[_0x528f81(0x13c)]('Error\x20deleting\x20file:',_0x34d52f),_0x1fe057['json']({'success':![],'error':_0x34d52f[_0x528f81(0xf0)]});}}),_0x12d0d0['login'](process[_0x3d7209(0xc2)][_0x3d7209(0x14f)]);}